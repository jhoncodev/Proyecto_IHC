<!DOCTYPE html>
<html lang="es">
<head>
    <script src="https://cdn.userway.org/widget.js" data-account="jvjk6t7aTx"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito - By Aleli Boutique</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/carrito.css">
    <link rel="stylesheet" href="css/accesibilidad.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<body>

    <div id="header-placeholder"></div>

    <main>
        <div class="carrito-container">
            <div class="cart-items">
                <h2 class="cart-title">Mi Carrito de Compras</h2>

                <div class="cart-item">
                    <img src="images/producto-tacos-florales.jpg" alt="Tacos Florales" class="item-image">
                    <div class="item-details">
                        <h3 class="item-name">Tacos Florales Elegante</h3>
                        <p class="item-color">Color: Azul/Rojo</p>
                        <p class="item-size">Talla: M</p>
                        <div class="item-quantity">
                            <span class="quantity-label">Cantidad:</span>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="decreaseQuantity(1)">-</button>
                                <span class="quantity-value" id="quantity-1">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity(1)">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <div class="item-price-container">
                            <p class="original-price">S/ 150.00</p>
                            <p class="item-price discount" id="price-1">S/ 120.00</p>
                        </div>
                        <div class="action-links">
                            <span class="action-link" onclick="removeItem(1)">Eliminar</span>
                        </div>
                    </div>
                </div>

                <div class="cart-item">
                    <img src="images/producto-vestido-casual.jpg" alt="Vestido Casual" class="item-image">
                    <div class="item-details">
                        <h3 class="item-name">Blusa Casual Moderna</h3>
                        <p class="item-color">Color: Rojo oscuro</p>
                        <p class="item-size">Talla: S</p>
                        <div class="item-quantity">
                            <span class="quantity-label">Cantidad:</span>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="decreaseQuantity(2)">-</button>
                                <span class="quantity-value" id="quantity-2">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity(2)">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <div class="item-price-container">
                            <p class="item-price" id="price-2">S/ 85.00</p>
                        </div>
                        <div class="action-links">
                            <span class="action-link" onclick="removeItem(2)">Eliminar</span>
                        </div>
                    </div>
                </div>

                <div class="cart-item">
                    <img src="images/producto-pantalon-jeans.jpg" alt="Pantalón Jeans" class="item-image">
                    <div class="item-details">
                        <h3 class="item-name">Pantalón Jeans Premium</h3>
                        <p class="item-color">Color: Rosado pastel</p>
                        <p class="item-size">Talla: 28</p>
                        <div class="item-quantity">
                            <span class="quantity-label">Cantidad:</span>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="decreaseQuantity(3)">-</button>
                                <span class="quantity-value" id="quantity-3">2</span>
                                <button class="quantity-btn" onclick="increaseQuantity(3)">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <div class="item-price-container">
                            <p class="item-price" id="price-3">S/ 180.00</p>
                        </div>
                        <div class="action-links">
                            <span class="action-link" onclick="removeItem(3)">Eliminar</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="order-summary">
                <h2 class="summary-title">Resumen del Pedido</h2>

                <div class="summary-row">
                    <span class="summary-label">Subtotal</span>
                    <span class="summary-value" id="subtotal">S/ 385.00</span>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Envío</span>
                    <span class="shipping-free">GRATIS</span>
                </div>

                <div class="promo-code">
                    <div class="promo-toggle" onclick="togglePromo()">
                        <span>¿Tienes un código promocional?</span>
                        <i class="fas fa-chevron-down" id="promo-icon"></i>
                    </div>
                    <div class="promo-input-container" id="promo-container">
                        <input type="text" class="promo-input" placeholder="Ingresa tu código" id="promo-input">
                        <button class="promo-btn" onclick="applyPromo()">Aplicar</button>
                    </div>
                </div>

                <div class="total-row">
                    <span>Total Estimado</span>
                    <span id="total">S/ 385.00</span>
                </div>

                <button class="checkout-btn" onclick="checkout()">Pagar</button>

                <div class="security-notice">
                    <i class="fas fa-lock"></i>
                    <span>Pago seguro y protegido</span>
                </div>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="js/layout.js"></script>
    <script>
        const basePrices = {
            1: 120.00,
            2: 85.00,
            3: 90.00
        };

        function togglePromo() {
            const container = document.getElementById('promo-container');
            const icon = document.getElementById('promo-icon');
            container.classList.toggle('active');

            if (container.classList.contains('active')) {
                icon.style.transform = 'rotate(180deg)';
            } else {
                icon.style.transform = 'rotate(0deg)';
            }
        }

        function increaseQuantity(id) {
            const quantityEl = document.getElementById(`quantity-${id}`);
            let quantity = parseInt(quantityEl.textContent);
            quantity++;
            quantityEl.textContent = quantity;
            updatePrice(id, quantity);
            updateTotal();
        }

        function decreaseQuantity(id) {
            const quantityEl = document.getElementById(`quantity-${id}`);
            let quantity = parseInt(quantityEl.textContent);
            if (quantity > 1) {
                quantity--;
                quantityEl.textContent = quantity;
                updatePrice(id, quantity);
                updateTotal();
            }
        }

        function updatePrice(id, quantity) {
            const priceEl = document.getElementById(`price-${id}`);
            const basePrice = basePrices[id];
            const newPrice = (basePrice * quantity).toFixed(2);
            priceEl.textContent = `S/ ${newPrice}`;
        }

        function updateTotal() {
            let subtotal = 0;

            const qty1 = parseInt(document.getElementById('quantity-1').textContent);
            subtotal += basePrices[1] * qty1;

            const qty2 = parseInt(document.getElementById('quantity-2').textContent);
            subtotal += basePrices[2] * qty2;

            const qty3 = parseInt(document.getElementById('quantity-3').textContent);
            subtotal += basePrices[3] * qty3;

            document.getElementById('subtotal').textContent = `S/ ${subtotal.toFixed(2)}`;
            document.getElementById('total').textContent = `S/ ${subtotal.toFixed(2)}`;
        }

        function applyPromo() {
            const promoInput = document.getElementById('promo-input');
            const promoCode = promoInput.value.trim().toUpperCase();

            if (promoCode === 'ALELI10') {
                alert('¡Código promocional aplicado! 10% de descuento');
            } else if (promoCode === '') {
                alert('Por favor ingresa un código promocional');
            } else {
                alert('Código promocional inválido');
            }
        }

        function removeItem(id) {
            if (confirm('¿Estás seguro de eliminar este producto?')) {
                alert(`Producto ${id} eliminado del carrito`);
            }
        }

        function checkout() {
            alert('Redirigiendo al proceso de pago...');
        }
    </script>
</body>
</html>
